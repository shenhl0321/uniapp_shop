{"version":3,"sources":["uni-app:///main.js","webpack:////Users/hongliangshen/Desktop/cwt-cashier-wechat/pages/luckProd/luckProd.vue?05dd","webpack:////Users/hongliangshen/Desktop/cwt-cashier-wechat/pages/luckProd/luckProd.vue?c9cc","webpack:////Users/hongliangshen/Desktop/cwt-cashier-wechat/pages/luckProd/luckProd.vue?4a5c","webpack:////Users/hongliangshen/Desktop/cwt-cashier-wechat/pages/luckProd/luckProd.vue?5b81","uni-app:///pages/luckProd/luckProd.vue","webpack:////Users/hongliangshen/Desktop/cwt-cashier-wechat/pages/luckProd/luckProd.vue?29ed","webpack:////Users/hongliangshen/Desktop/cwt-cashier-wechat/pages/luckProd/luckProd.vue?4f11"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","title","style","backgroundColor","color","is_play","available_num","start_angle","base_circle_num","low_circle_num","add_angle","use_speed","nor_speed","low_speed","end_speed","random_angle","change_angle","result_val","Jack_pots","startAngle","endAngle","val","screenWidth","screenHeight","gobackBtnHeight","nickName","avatarUrl","couldLottery","qrcodePath","price","components","navigation","shopCard","computed","shopInfo","onLoad","uni","success","console","that","onReady","onShow","url","lang","withCredentials","userInfo","fail","complete","onShareAppMessage","methods","gohome","getUserLotteryHistory","getLuckProdList","res","getLuckPordCode","save","filePath","encoding","doRunning","luckDrawStart","theOne","setTimeout","icon","luckDrawChange","luckDrawReset","getLuckDrawResult","content","luckDrawEndset"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACa;;;AAGpE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAuzB,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyC30B;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAIA;EACAC;IACA;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MAAA;MACA;MACA;QACAC;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACAC;IACAC;EACA;EAEAC;IACAC;MACA;IACA;EACA;EAEA;AACA;AACA;EACAC;IAAA;IACAC;MACAC;QACAC;QACA;UACAhB;UACAC;UACAC;QACA;MACA;IACA;;IAEAe;EACA;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;IACA;IACAL;MACAC;QACA;UACAD;YACAM;UACA;QACA;UACAN;YACAO;YACAC;YACAP,gCAEA;cAAA,IADAQ;cAEAN;gBACAd;gBACAC;cACA;cACAa;cACAA;cACAA;YACA;YACAO;YAAA,CACA;YACAC;YAAA;UAEA;QACA;MACA;IAEA;EACA;EAEA;AACA;AACA;EACAC;EACAC;IACAC;MACAZ;MACAF;QACAM;MACA;IACA;IACAS;MAAA;MACA;QACA;MACA;QACAb;MACA;IACA;IACAc;MAAA;MACA;QACA;UACA;UACAC;YACAf;YACApB;cACAC;cACAC;cACAC;YACA;UACA;UACA;YACAH;UACA;QACA;MACA;QACAoB;MACA;IACA;IACAgB;MACA;MACA;QACA;QACA;QACA;QACAhB;QACAiB;UACAC;UACAxD;UACAyD;UACApB;YACA;cACA;cACAT;YACA;UACA;QACA;MACA;QACAU;MACA;IACA;IACAoB;MAAA;MACApB;MACA;QACA;MACA;QACAA;MACA;IACA;IAEA;AACA;AACA;IACAqB;MACA;MACA;MACA;QACA;UACA;UACApB;YACAlC;UACA;UACA;YACAkC;cACAV;YACA;YACAU;YACAA;YACA;YACA;cACA;gBACAqB;gBACA;cACA;YACA;YACAtB;YACAC;cACAxB;YACA;YACA8C;UACA;YACAvB;UACA;QACA;QAAA;MACA;QACAF;UACAnC;UACA6D;QACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;MACA;QACA;QACA;QACAxB;;QAEAA;MACA;QACA;QACA;UACA;UACA;UACAA;QACA,uFACA/B;UACA;UACA;UACA+B;QACA;UACA;UACA;UACAA;QACA;;QAGAA;UACAvB,sFACAD,sCACA;QACA;QACA8C;MACA;IACA;IAEA;AACA;AACA;IACAG;MACA;MACAzB;QACAhC;MACA;;MAEAgC;QACA5B;MACA;;MAEA4B;QACAxB;MACA;;MAEAwB;QACAvB;MACA;IACA;IAEA;AACA;AACA;IACAiD;MACA;QACA,gGACA7C;UACAmB;YACAtB;UACA;UACAmB;YACAnC;YACA;YACAiE;UACA;UACA;QACA;QAEA;MACA;MAEA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA5B;QACAlC;MACA;;MAEAkC;QACAjC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrZA;AAAA;AAAA;AAAA;AAA8pC,CAAgB,mmCAAG,EAAC,C;;;;;;;;;;;ACAlrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/luckProd/luckProd.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-stat.es.js';\nimport Vue from 'vue'\nimport Page from './pages/luckProd/luckProd.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./luckProd.vue?vue&type=template&id=f67c58f4&\"\nvar renderjs\nimport script from \"./luckProd.vue?vue&type=script&lang=js&\"\nexport * from \"./luckProd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./luckProd.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/luckProd/luckProd.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./luckProd.vue?vue&type=template&id=f67c58f4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./luckProd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./luckProd.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!--pages/luckProd/luckProd.wxml-->\r\n\t\t<!-- <navigation title = '{{title}}' naviStyle='{{style}}' ifShowGoBack='{{true}}' data-from=\"home\"></navigation> -->\r\n\r\n\t\t<view @tap=\"gohome\" class=\"gohomeContainer\" :style=\"'top:' + (gobackBtnHeight-2) + 'px'\">\r\n\t\t\t<image class=\"gobackpng\" src=\"/static/images/icon/gohome.png\" mode=\"aspectFit\"></image>\r\n\t\t</view>\r\n\t\t<view class=\"container\">\r\n\t\t\t<image src=\"https://images.51xeld.com/2020/10/f847f1c3e8ec4388b061d86573aae0f9.png'\" class=\"backImg\"\r\n\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t<view class=\"prodBox\"\r\n\t\t\t\t:style=\"'width:' + (screenWidth*0.8) + 'px;height:' + (screenWidth*0.8) + 'px;top:' + (screenHeight*0.38) + 'px'\">\r\n\t\t\t\t<image src=\"https://images.51xeld.com/2020/10/20e7b0b592d445d2b72f5f0164c7d944.png\" class=\"imgNo1\"\r\n\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t<image :style=\"'transform:rotate(' + change_angle + 'deg)'\"\r\n\t\t\t\t\tsrc=\"http://images.51xeld.com/2020/10/609fa5c0405045ffb2200cbc1125d367.png\" class=\"imgNo2\"\r\n\t\t\t\t\tmode=\"widthFix\"></image>\r\n\t\t\t\t<image @tap=\"luckDrawStart\" src=\"https://images.51xeld.com/2020/10/46c7c432009d49958f28546aa1dc9954.png\"\r\n\t\t\t\t\tclass=\"imgNo3\" mode=\"widthFix\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view>\r\n\t\t\t\t<view>您中奖啦！奖品是</view>\r\n\t\t\t\t<view>{{price}}</view>\r\n\t\t\t</view> -->\r\n\t\t\t<view class=\"activityNote\" :style=\"'top:' + (screenHeight*0.38+screenWidth*0.88) + 'px'\">\r\n\t\t\t\t<image src=\"http://images.51xeld.com/2020/10/c948d0c7362f4e72a081b4e6ef5f01a0.png\" mode=\"aspectFit\"\r\n\t\t\t\t\tclass=\"whiteLine\"></image>\r\n\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t<view>活动说明</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t<view>1. 每人每日一次免费抽奖次数，中奖者请至现场领取奖品。</view>\r\n\t\t\t\t\t<view>2. 此活动最终解释权归湖北小象智慧门店生物科技有限公司所有。</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// pages/luckProd/luckProd.js\r\n\tvar that;\r\n\timport navigation from \"../../components/navigation/navigation\";\r\n\timport shopCard from \"../../components/shopCard/shopCard\";\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbackgroundColor: '#7C50E6',\r\n\t\t\t\t\tcolor: '#FFFFFF'\r\n\t\t\t\t},\r\n\t\t\t\tis_play: false,\r\n\t\t\t\t// 是否在运动中，避免重复启动bug\r\n\t\t\t\tavailable_num: 0,\r\n\t\t\t\t// 可用抽奖的次数，可自定义设置或者接口返回\r\n\t\t\t\tstart_angle: 0,\r\n\t\t\t\t// 转动开始时初始角度=0位置指向正上方，按顺时针设置，可自定义设置\r\n\t\t\t\tbase_circle_num: 9,\r\n\t\t\t\t// 基本圈数，就是在转到（最后一圈）结束圈之前必须转够几圈 ，可自定义设置\r\n\t\t\t\tlow_circle_num: 5,\r\n\t\t\t\t// 在第几圈开始进入减速圈（必须小于等于基本圈数），可自定义设置\r\n\t\t\t\tadd_angle: 10,\r\n\t\t\t\t// 追加角度，此值越大转动越快，请保证360/add_angle=一个整数，比如1/2/3/4/5/6/8/9/10/12等\r\n\t\t\t\tuse_speed: 1,\r\n\t\t\t\t// 当前速度，与正常转速值相等\r\n\t\t\t\tnor_speed: 1,\r\n\t\t\t\t// 正常转速，在减速圈之前的转速，可自定义设置\r\n\t\t\t\tlow_speed: 10,\r\n\t\t\t\t// 减速转速，在减速圈的转速，可自定义设置\r\n\t\t\t\tend_speed: 20,\r\n\t\t\t\t// 最后转速，在结束圈的转速，可自定义设置\r\n\t\t\t\trandom_angle: 0,\r\n\t\t\t\t// 中奖角度，也是随机数，也是结束圈停止的角度，这个值采用系统随机或者接口返回\r\n\t\t\t\tchange_angle: 0,\r\n\t\t\t\t// 变化角度计数，0开始，一圈360度，基本是6圈，那么到结束这个值=6*360+random_angle；同样change_angle/360整除表示走过一整圈\r\n\t\t\t\tresult_val: \"未中奖\",\r\n\t\t\t\t// 存放奖项容器，可自定义设置\r\n\t\t\t\tJack_pots: [ // 奖项区间 ，360度/奖项个数 ，一圈度数0-360，可自定义设置\r\n\t\t\t\t\t// random_angle是多少，在那个区间里面就是中哪个奖项\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstartAngle: 1,\r\n\t\t\t\t\t\tendAngle: 51,\r\n\t\t\t\t\t\tval: \"1等奖\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tstartAngle: 52,\r\n\t\t\t\t\t\tendAngle: 102,\r\n\t\t\t\t\t\tval: \"2等奖\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tstartAngle: 103,\r\n\t\t\t\t\t\tendAngle: 153,\r\n\t\t\t\t\t\tval: \"3等奖\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tstartAngle: 154,\r\n\t\t\t\t\t\tendAngle: 203,\r\n\t\t\t\t\t\tval: \"4等奖\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tstartAngle: 204,\r\n\t\t\t\t\t\tendAngle: 251,\r\n\t\t\t\t\t\tval: \"5等奖\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tstartAngle: 252,\r\n\t\t\t\t\t\tendAngle: 307,\r\n\t\t\t\t\t\tval: \"6等奖\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tstartAngle: 307,\r\n\t\t\t\t\t\tendAngle: 360,\r\n\t\t\t\t\t\tval: \"未中奖\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tscreenWidth: \"\",\r\n\t\t\t\tscreenHeight: \"\",\r\n\t\t\t\tgobackBtnHeight: \"\",\r\n\t\t\t\tnickName: \"\",\r\n\t\t\t\tavatarUrl: \"\",\r\n\t\t\t\tcouldLottery: \"\",\r\n\t\t\t\tqrcodePath: \"\",\r\n\t\t\t\tprice: \"\"\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tcomponents: {\r\n\t\t\tnavigation,\r\n\t\t\tshopCard\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tshopInfo() {\r\n\t\t\t\treturn this.$store.state.shopInfo\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 生命周期函数--监听页面加载\r\n\t\t */\r\n\t\tonLoad: function(options) {\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: result => {\r\n\t\t\t\t\tconsole.log(result);\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tscreenWidth: result.screenWidth,\r\n\t\t\t\t\t\tscreenHeight: result.screenHeight,\r\n\t\t\t\t\t\tgobackBtnHeight: getApp().gobackBtnHeight\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}); // this.getUserLotteryHistory()\r\n\r\n\t\t\tthat = this;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 生命周期函数--监听页面初次渲染完成\r\n\t\t */\r\n\t\tonReady: function() {},\r\n\r\n\t\t/**\r\n\t\t * 生命周期函数--监听页面显示\r\n\t\t */\r\n\t\tonShow: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tuni.getSetting({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif (!res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\tlang: 'zh_CN',\r\n\t\t\t\t\t\t\twithCredentials: true,\r\n\t\t\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\t\t\tuserInfo\r\n\t\t\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t\t\tnickName: userInfo.nickName,\r\n\t\t\t\t\t\t\t\t\tavatarUrl: userInfo.avatarUrl\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthat.getUserLotteryHistory();\r\n\t\t\t\t\t\t\t\tthat.getLuckProdList();\r\n\t\t\t\t\t\t\t\tthat.getLuckPordCode();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: res => { // console.log(\"get info failed\");\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete: res => { // console.log(\"get UserInfo running\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 用户点击右上角分享\r\n\t\t */\r\n\t\tonShareAppMessage: function() {},\r\n\t\tmethods: {\r\n\t\t\tgohome: function() {\r\n\t\t\t\tconsole.log(\"running\");\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '../home/home'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetUserLotteryHistory: function() {\r\n\t\t\t\tthis.$request.post('/wheel/wheelUser?shopId=' + shopInfo.shopId, ).then((res) => {\r\n\t\t\t\t\tthis.couldLottery = res\r\n\t\t\t\t}, (rej) => {\r\n\t\t\t\t\tconsole.log(rej)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetLuckProdList: function() {\r\n\t\t\t\tthis.$request.get('/wheel/productList?shopId=' + shopInfo.shopId, ).then((res) => {\r\n\t\t\t\t\tif (res.length !== 0) {\r\n\t\t\t\t\t\tvar Jack_pots = [];\r\n\t\t\t\t\t\tres.forEach((item, index) => {\r\n\t\t\t\t\t\t\tconsole.log(item, index);\r\n\t\t\t\t\t\t\tJack_pots.push({\r\n\t\t\t\t\t\t\t\tstartAngle: 1 + 60 * index,\r\n\t\t\t\t\t\t\t\tendAngle: 60 * (index + 1),\r\n\t\t\t\t\t\t\t\tval: item.name\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\tJack_pots\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (rej) => {\r\n\t\t\t\t\tconsole.log(rej)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetLuckPordCode: function() {\r\n\t\t\t\tvar self = this\r\n\t\t\t\tthis.this.$request.get('/user/getLuckProdCode', ).then((res) => {\r\n\t\t\t\t\tvar save = uni.getFileSystemManager();\r\n\t\t\t\t\tvar number = Math.random();\r\n\t\t\t\t\tlet filePath = uni.env.USER_DATA_PATH + '/pic' + number + '.png';\r\n\t\t\t\t\tconsole.log(\"图片地址为\" + filePath);\r\n\t\t\t\t\tsave.writeFile({\r\n\t\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\t\tdata: res,\r\n\t\t\t\t\t\tencoding: 'base64',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t\t\t//base 64设置到页面上\r\n\t\t\t\t\t\t\t\tqrcodePath: filePath\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, (rej) => {\r\n\t\t\t\t\tconsole.log(rej)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdoRunning: function() {\r\n\t\t\t\tconsole.log(getApp().shopId);\r\n\t\t\t\tthis.$request.post('/wheel/lottery?shopId=' + this.shopInfo.shopId, ).then((res) => {\r\n\t\t\t\t\tthis.price = res.message\r\n\t\t\t\t}, (rej) => {\r\n\t\t\t\t\tconsole.log(rej)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 启动抽奖\r\n\t\t\t */\r\n\t\t\tluckDrawStart: function() {\r\n\t\t\t\t// var that = this\r\n\t\t\t\t// 阻止运动中重复点击\r\n\t\t\t\tif (that.couldLottery) {\r\n\t\t\t\t\tif (!that.is_play) {\r\n\t\t\t\t\t\t// 设置标识在运动中\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\tis_play: true // couldLottery: false,\r\n\t\t\t\t\t\t}); // 重置参数\r\n\t\t\t\t\t\tthis.$request.post('/wheel/lottery?shopId=' + getApp().shopId, ).then((res) => {\r\n\t\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t\tprice: res.message\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.luckDrawReset();\r\n\t\t\t\t\t\t\tthat.getUserLotteryHistory(); // 几率随机，也可从服务端获取几率\r\n\t\t\t\t\t\t\tvar theOne;\r\n\t\t\t\t\t\t\tfor (const key in that.Jack_pots) {\r\n\t\t\t\t\t\t\t\tif (that.Jack_pots[key].val === that.price) {\r\n\t\t\t\t\t\t\t\t\ttheOne = that.Jack_pots[key];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(theOne);\r\n\t\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t\trandom_angle: Math.ceil(30 + theOne.startAngle)\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tsetTimeout(that.luckDrawChange, that.use_speed);\r\n\t\t\t\t\t\t}, (rej) => {\r\n\t\t\t\t\t\t\tconsole.log(rej)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '今天次数已达上限，明天再来！',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 转盘运动\r\n\t\t\t */\r\n\t\t\tluckDrawChange: function() {\r\n\t\t\t\t// console.log(that.data.random_angle)\r\n\t\t\t\t// 继续运动\r\n\t\t\t\tif (that.change_angle >= that.base_circle_num * 360 + that.random_angle) {\r\n\t\t\t\t\t// 已经到达结束位置\r\n\t\t\t\t\t// 提示中奖，\r\n\t\t\t\t\tthat.getLuckDrawResult(); // 运动结束设置可用抽奖的次数和激活状态设置可用\r\n\r\n\t\t\t\t\tthat.luckDrawEndset();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 运动\r\n\t\t\t\t\tif (that.change_angle < that.low_circle_num * 360) {\r\n\t\t\t\t\t\t// 正常转速\r\n\t\t\t\t\t\t// console.log(\"正常转速\")\r\n\t\t\t\t\t\tthat.use_speed = that.nor_speed;\r\n\t\t\t\t\t} else if (that.change_angle >= that.low_circle_num * 360 && that.change_angle <= that\r\n\t\t\t\t\t\t.base_circle_num * 360) {\r\n\t\t\t\t\t\t// 减速圈\r\n\t\t\t\t\t\t// console.log(\"减速圈\")\r\n\t\t\t\t\t\tthat.use_speed = that.low_speed;\r\n\t\t\t\t\t} else if (that.change_angle > that.base_circle_num * 360) {\r\n\t\t\t\t\t\t// 结束圈\r\n\t\t\t\t\t\t// console.log(\"结束圈\")\r\n\t\t\t\t\t\tthat.use_speed = that.end_speed;\r\n\t\t\t\t\t} // 累加变化计数\r\n\r\n\r\n\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\tchange_angle: that.change_angle + that.add_angle >= that.base_circle_num * 360 + that\r\n\t\t\t\t\t\t\t.random_angle ? that.base_circle_num *\r\n\t\t\t\t\t\t\t360 + that.random_angle : that.change_angle + that.add_angle\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(that.luckDrawChange, that.use_speed);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 重置参数\r\n\t\t\t */\r\n\t\t\tluckDrawReset: function() {\r\n\t\t\t\t// 转动开始时首次点亮的位置，可自定义设置\r\n\t\t\t\tthat.setData({\r\n\t\t\t\t\tstart_angle: 0\r\n\t\t\t\t}); // 当前速度，与正常转速值相等\r\n\r\n\t\t\t\tthat.setData({\r\n\t\t\t\t\tuse_speed: that.nor_speed\r\n\t\t\t\t}); // 中奖索引，也是随机数，也是结束圈停止的位置，这个值采用系统随机或者接口返回\r\n\r\n\t\t\t\tthat.setData({\r\n\t\t\t\t\trandom_angle: 120\r\n\t\t\t\t}); // 变化计数，0开始，必须实例有12个奖项，基本是6圈，那么到结束这个值=6*12+random_number；同样change_num/12整除表示走过一整圈\r\n\r\n\t\t\t\tthat.setData({\r\n\t\t\t\t\tchange_angle: 240\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取抽奖结果\r\n\t\t\t */\r\n\t\t\tgetLuckDrawResult: function() {\r\n\t\t\t\tfor (var j = 0; j < that.Jack_pots.length; j++) {\r\n\t\t\t\t\tif (that.random_angle >= that.Jack_pots[j].startAngle && that.random_angle <= that.Jack_pots[j]\r\n\t\t\t\t\t\t.endAngle) {\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\tresult_val: that.Jack_pots[j].val\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '抽奖结果',\r\n\t\t\t\t\t\t\t// content: that.data.Jack_pots[j].val,\r\n\t\t\t\t\t\t\tcontent: that.price\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 更新状态（运动结束设置可用抽奖的次数和激活状态设置可用）\r\n\t\t\t */\r\n\t\t\tluckDrawEndset: function() {\r\n\t\t\t\t// 是否在运动中，避免重复启动bug\r\n\t\t\t\tthat.setData({\r\n\t\t\t\t\tis_play: false\r\n\t\t\t\t}); // 可用抽奖的次数，可自定义设置\r\n\r\n\t\t\t\tthat.setData({\r\n\t\t\t\t\tavailable_num: that.available_num - 1\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style>\r\n\t/* pages/luckProd/luckProd.wxss */\r\n\tpage {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-image: linear-gradient(to right, #5D37D2, #4442CE, #6044EA);\r\n\t}\r\n\r\n\t.gohomeContainer {\r\n\t\tborder: 1px solid white;\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\tposition: fixed;\r\n\t\ttop: 30px;\r\n\t\tleft: 16rpx;\r\n\t\tz-index: 10;\r\n\t\tborder-radius: 50%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.gobackpng {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tposition: relative;\r\n\t\ttop: 7rpx;\r\n\t}\r\n\r\n\t.container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.backImg {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\tz-index: -3;\r\n\t\ttop: 0rpx;\r\n\t}\r\n\r\n\t.prodBox {\r\n\t\tposition: absolute;\r\n\t\ttop: 33%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, 0%);\r\n\t\twidth: 80%;\r\n\t}\r\n\r\n\t.prodBox .imgNo1 {\r\n\t\twidth: 100%;\r\n\t\tposition: absolute;\r\n\t\tz-index: -2;\r\n\t}\r\n\r\n\t.prodBox .imgNo2 {\r\n\t\twidth: 86%;\r\n\t\tposition: absolute;\r\n\t\tz-index: -1;\r\n\t\tmargin: 7%;\r\n\t}\r\n\r\n\t.prodBox .imgNo3 {\r\n\t\twidth: 30%;\r\n\t\tposition: absolute;\r\n\t\tz-index: -1;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t}\r\n\r\n\t.activityNote {\r\n\t\tposition: absolute;\r\n\t\t/* bottom: 0; */\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 22rpx;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.activityNote image {\r\n\t\theight: 60rpx;\r\n\t\twidth: 300rpx;\r\n\t}\r\n\r\n\r\n\t.whiteLine {\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t}\r\n\r\n\t.activityNote .title {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tline-height: 64rpx;\r\n\t}\r\n\r\n\t.activityNote .content {\r\n\t\twidth: 80%;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.activityNote .content view {\r\n\t\tmargin: 20rpx 0;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./luckProd.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./luckProd.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1724508089763\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}